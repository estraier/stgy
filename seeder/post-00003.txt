id: 0002000000000003
ownedBy: 0001000000000001
allowLikes: false
allowReplies: false
tags: stgy-help
content:<<____EOF____
# STGYの投稿の書式

STGYに投稿される各記事はMarkdown形式で表現されます。特別な記法を使わない限り、Markdownはプレーンテキストと同じ感覚で書けます。普通に文章を書けばそれが表示されます。単一の改行は段落内の改行とみなされ、連続した改行は段落の区切りとみなされます。典型的な例は以下のようになります。

```
今日の天気予報：
晴れときどき曇り、ところにより雨

まったく当てにならない天気予報を横目に、私は家を出た。

#天気予報, #ポエム
```

![基本的記事](/data/help-basic-post.png){size=xlarge}

Markdownは標準規格ではないので、変種が多数あります。ここでの実装もその変種の一つです。地の文の中の単一の改行を改行を無視する派閥と改行として扱う派閥があるのですが、ここでは単一の改行は段落内の改行（HTMLの``<br/>``）として扱われます。段落はHTMLの``<p>``で区切られます。結果として、単一改行と連続改行の行間は異なることになります。

記事の末尾にある「``#``」で始まる行は、タグの定義として扱われます。タグの分離はMarkdownとしての解釈をする前に行われます。複数のタグを指定する場合、カンマで区切ります。タグはリンクとして描写され、それをクリックすると、同じタグを持つ投稿の検索結果に遷移します。「``#[nolikes``]」という特殊タグを付けると、その投稿へのイイネが無効化されます。「``#[noreplies]``」という特殊タグを付けると、その投稿への返信が無効化されます。

ヘッダも書けます。ヘッダレベル1は「``# ``」、ヘッダレベル2は「``## ``」、ヘッダレベル3は「``### ``」を行頭に置きます。「``#``」の後ろには必ず空白が必要です。

```
# ヘッダレベル1
## ヘッダレベル2
### ヘッダレベル3
```

# ヘッダレベル1
## ヘッダレベル2
### ヘッダレベル3

リストも書けます。「``- ``」で始まる行はリストの項目になります。「``-``」の後ろには必ず空白が必要です。「``-``」の前に2つのスペースを置くと、リストのレベルを深くできます。

```
- リストレベル1、項目1
- リストレベル1、項目2
  - リストレベル2、項目1
  - リストレベル2、項目2
    - リストレベル3、項目1
    - リストレベル3、項目2
- リストレベル1、項目3
```

- リストレベル1、項目1
- リストレベル1、項目2
  - リストレベル2、項目1
  - リストレベル2、項目2
    - リストレベル3、項目1
    - リストレベル3、項目2
- リストレベル1、項目3

引用も書けます。「``> ``」で始まる行は引用になります。「``>``」の後ろには必ず空白が必要です。連続する引用の行は一つの引用の段落になります。

```
> あと何を話せただろう、
> 離れてしまうその前に。
```

> あと何を話せただろう、
> 離れてしまうその前に。

「``|``」で囲んだ連続した行は表になります。「``|``」で列を区切ります。「``=``」で囲まれたセルはヘッダになります。「``{colspan=2}``」「``{rowspan=2}``」を左端に置くと列結合と行結合ができます。「``>>``」「``><``」を左端に置くと右寄せと中寄せができます。

```
|=名前=|=説明=|={colspan=2}><人口=|
|東京都|都庁所在地は新宿区。日本の首都。|>>1,426万人|{rowspan=2}都会|
|神奈川県|県庁所在地は横浜市。大阪府より人口が多い。|>>921万人|
|千葉県|県庁所在地は千葉市。ピーナツで有名。|>>628人|{rowspan=2}田舎|
|埼玉県|県庁所在地はさいたま市。特徴は特にない。|>>770人|
```

|=名前=|=説明=|={colspan=2}><人口=|
|東京都|都庁所在地は新宿区。日本の首都。|>>1,426万人|{rowspan=2}都会|
|神奈川県|県庁所在地は横浜市。大阪府より人口が多い。|>>921万人|
|千葉県|県庁所在地は千葉市。ピーナツで有名。|>>628人|{rowspan=2}田舎|
|埼玉県|県庁所在地はさいたま市。特徴は特にない。|>>770人|

ハイパーリンクを表現するには、``[`` と ``]`` でアンカー文字列を挟んでから、直後に ``(`` と ``)`` で挟んでURLを書きます。STGY内のページにも、外部サイトへも、リンクを貼ることができます。

```
私は[ChatGPT](https://ja.wikipedia.org/wiki/ChatGPT)を使っています。
Googleで[ChatGPT](https://www.google.com/?q=ChatGPT)を検索できます。
使い方については[ヘルプ記事](/posts/0002000000000002)を見てください。
詳細については[管理者ユーザ](/users/0001000000000001)に聞いて下さい。
画像の管理は[画像管理ページ](/images)で行います。
```

私は[ChatGPT](https://ja.wikipedia.org/wiki/ChatGPT)を使っています。
Googleで[ChatGPT](https://www.google.com/?q=ChatGPT)を検索できます。
使い方については[ヘルプ記事](/posts/0002000000000002)を見てください。
詳細については[管理者ユーザ](/users/0001000000000001)に聞いて下さい。
画像の管理は[画像管理ページ](/images)で行います。

本文の中に現れる ``http://`` や ``https://`` で始まる文字列は、自動的にそのURLへのハイパーリンクになります。

```
- 詳細はこちら: https://kantei.go.jp/
```

- 詳細はこちら: https://kantei.go.jp/

ハイパーリンクのURL部分には特殊記法も使えます。``wiki-en`` や ``wiki-ja`` とすると、アンカー文字列を表題とするWikipedia英語版や日本語版の記事へのリンクになります。``google`` とすると、アンカー文字列を検索語とするGoogle検索結果へのリンクになります。

```
私は[ChatGPT](wiki-en)を使っています。
私は[ChatGPT](wiki-ja)を使っています。
Googleで[ChatGPT](google)を検索すると出てきます。
```

私は[ChatGPT](wiki-en)を使っています。
私は[ChatGPT](wiki-ja)を使っています。
Googleで[ChatGPT](google)を検索すると出てきます。

文字の装飾もできます。装飾は地の文だけではなく、ヘッダやリストや表の中でも使えます。

```
::斜体::、**太字**、__下線__、~~打消~~、``コード``、%%マーク%%、{{漢字|ルビ}}
```

::斜体::、**太字**、__下線__、~~打消~~、``コード``、%%マーク%%、{{漢字|ルビ}}

複雑な数式も書けます。``$$`` で囲んだ区間は、LaTeXの数式として処理され、SVG画像として表示されます。``\\frac``、``\\sum``、``\\lim``、``\\sqrt`` などのマクロも使えます。

```
$$E = mc^2$$
$$\int_0^{\sqrt{N}} x^2 \, dx = \lim_{n \to \infty} \sum_{i=1}^{n} f\left( \frac{i \cdot x}{n} \right) \cdot \left( \frac{x}{n} \right)$$
```

$$E = mc^2$$
$$\int_0^{\sqrt{N}} x^2 \, dx = \lim_{n \to \infty} \sum_{i=1}^{n} f\left( \frac{i \cdot x}{n} \right) \cdot \left( \frac{x}{n} \right)$$

HTMLの``<pre>``のように改行をそのまま表現したい場合には、その部分を「\`\`\`」 だけの行と「\`\`\`」だけの行で囲みます。

罫線を引きたい時は、ハイフンを4つ繋げた「``----``」だけの行を書きます。5つ繋げた「``-----``」にするとより目立つ罫線になります。3つ繋げた「``---``」は見えない罫線で、行間を少し開けたり画像の回り込みを解除したりするのに使います。

```
---
----
-----
```

---
----
-----

記事内に画像を埋め込むには、![キャプション]\(URL) 記法を用います。キャプションは空文字列でも構いません。投稿メニューの画像ツールを使うと、画像のアップロードと埋め込み記法の執筆が一度でできます。

セキュリティ上の理由で、埋め込める画像のURLには制限があります。画像管理機能でアップロードした ``/images/`` で始まるパスか、STGYに既存の``/data/`` で始まるパスのみです。

```
![STGYロゴ](/data/logo-square.webp)
```

![STGYロゴ](/data/logo-square.webp)

記事本文の読みやすさのために画像は小さめに表示されますが、その画像を押すと拡大表示されます。

最初から画像を大きく表示したい場合には、``{size=large}`` や ``{size=xlarge}`` マクロを指定できます。

```
![STGYロゴ](/data/logo-square.webp){size=large}
![STGYロゴ](/data/logo-square.webp){size=xlarge}
```

![STGYロゴ](/data/logo-square.webp){size=large}
![STGYロゴ](/data/logo-square.webp){size=xlarge}

画像を小さく表示したい場合には、``{size=small}`` や ``{size=xsmall}`` マクロを指定できます。

```
![STGYロゴ](/data/logo-square.webp){size=small}
![STGYロゴ](/data/logo-square.webp){size=xsmall}
```

![STGYロゴ](/data/logo-square.webp){size=small}
![STGYロゴ](/data/logo-square.webp){size=xsmall}

画像をフローティングさせて文字を回り込みさせたい場合、``{float=left}`` や ``{size=right}``マクロを指定できます。回り込みを解除したい場合、「``---``」の見えない罫線を引くと良いでしょう。

```
![STGYロゴ](/data/logo-square.webp){float=left,size=small}
渚のハイカラ人魚
キュートなヒップにズキンドキン
渚のハイカラ人魚
まぶしい素足にズキンドキン
---
![STGYロゴ](/data/logo-square.webp){float=right,size=small}
I will follow you
あなたに追いてゆきたい
I will follow you
ちょっぴり気が弱いけど
---
```

![STGYロゴ](/data/logo-square.webp){float=left,size=small}
渚のハイカラ人魚
キュートなヒップにズキンドキン
渚のハイカラ人魚
まぶしい素足にズキンドキン
---
![STGYロゴ](/data/logo-square.webp){float=right,size=small}
I will follow you
あなたに追いてゆきたい
I will follow you
ちょっぴり気が弱いけど
---

画像を横並びで表示したい場合には、``{grid}`` マクロを使います。``{grid}`` がついた画像が連続すると、それを1行にまとめます。最大5列までサポートしています。ひとつだけでグリッドにすると、中寄せにする効果があります。

```
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
```

![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
![STGYロゴ](/data/logo-square.webp){grid}
---

投稿詳細画面には記事内の全ての画像が表示されますが、投稿一覧画像にはひとつの代表画像のサムネイルしか表示されません。デフォルトでは、最初の画像が代表画像になります。最初の画像以外を代表画像にしたい場合には、その画像に ``{featured}`` マクロを付与します。あるいは、代表画像にしたくない画像に ``{no-featured}`` をつけても良いでしょう。全ての画像に ``{no-featured}`` をつければ、代表画像は表示されなくなります。

Next: [STGYのアーキテクチャ](/posts/0002000000000011)
____EOF____
